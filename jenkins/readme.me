# Jenkins CI/CD Pipelines

This directory contains two Jenkins pipelines (CI and CD) for the **TheUltimate-CI-CD** project, plus a helper install script to bootstrap a fresh Ubuntu host.

---

## ğŸ“‚ Folder Structure

jenkins/
    â”œâ”€â”€ ci-pipeline/ 
        â”‚   â””â”€â”€ Jenkinsfile 
    â”œâ”€â”€ cd-pipeline/ 
        â”‚ â””â”€â”€ Jenkinsfile 
    â””â”€â”€ jenkins.sh
    

- **ci-pipeline/Jenkinsfile**  
  Defines your Continuous Delivery pipeline, which runs on pushes to the `dev` branch.  
  Key stages:  
  1. **Git Checkout**: pulls `dev` from GitHub  
  2. **Compile & Test**: uses Maven to compile & run unit tests in `BoardGame/`  
  3. **File System Scan**: runs Trivy FS scan, outputs `trivy-fs-report.html`  
  4. **SonarQube Analysis & Quality Gate**  
  5. **Package & Publish**:  
     - Maven package & deploy to Nexus  
     - Build, scan, and push Docker image (`osamaseyam/boardgame-app:latest`)  
  6. **Ansible With Docker**: deploys containers via `Ansible/docker.yml`  
  7. **Notification**: emails build results and attaches Trivy reports  

- **cd-pipeline/Jenkinsfile**  
  Defines your Continuous Integration pipeline, which runs on pushes to the `main` branch.  
  Key stages:  
  1. **Git Checkout**: pulls `main` from GitHub  
  2. **Deploy to Kubernetes**: calls Ansible (`deployment.yml`)  
  3. **Verify Deployment**: calls Ansible (`verify-deployment.yml`)  
  4. **Notification**: always sends an HTML email with build status  

- **jenkins.sh**  
  Bootstraps a fresh Ubuntu/Debian host for Jenkins and pipeline dependencies. Installs:  
  - OpenJDKÂ 17  
  - Jenkins  
  - Docker (and adds official Docker repo)  
  - Trivy (fileâ€‘system scanner)  
  - `kubectl` CLI  

---

## âš™ï¸ Usage

1. **Provision Ubuntu VM**  
   ```bash
   # On a new Ubuntu VM:
   sudo apt update
   git clone https://github.com/Khaled1771/TheUltimate-CI-CD.git
   cd TheUltimate-CI-CD/jenkins
   sudo bash jenkins.sh
